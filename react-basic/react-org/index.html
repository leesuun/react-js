<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />

        <title>Hello React!</title>

        <script src="https://unpkg.com/react@^16/umd/react.production.min.js"></script>
        <script src="https://unpkg.com/react-dom@16.13.0/umd/react-dom.production.min.js"></script>
        <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>
    </head>

    <body>
        <div id="root"></div>

        <script type="text/babel">
            /*
            function tick() {
                const element = (
                    <div>
                        <h1>Hello, World!</h1>
                        <h2>It is {new Date().toLocaleTimeString()}.</h2>
                    </div>
                );
                ReactDOM.render(element, document.querySelector("#root"));
            }
            setInterval(tick, 1000);
            */
            /*
            function Clock(props) {
                return (
                    <div>
                        <h1>Hello, World!</h1>
                        <h2>It is {props.date.toLocaleTimeString()}.</h2>
                    </div>
                );
            }
            */
            /*
            class Clock extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = { date: new Date() };
                }

                componentDidMount() {
                    this.timerID = setInterval(() => this.tick(), 1000);
                }

                componentWillUnmount() {
                    clearInterval(this.timerID);
                }

                tick() {
                    this.setState({
                        date: new Date(),
                    });
                }
                render() {
                    return (
                        <div>
                            <h1>Hello, world!</h1>
                            <h2>It is {this.state.date.toLocaleTimeString()}.</h2>
                        </div>
                    );
                }
            }

            function tick() {
                ReactDOM.render(
                    <Clock />,
                    document.getElementById("root")
                );
            }
            setInterval(tick, 1000);
            */
            /*
            function Welcome(props) {
                return <h1>Hello, {props.name}</h1>;
            }

            function App() {
                return (
                    <div>
                        <Welcome name="Sara" />
                        <Welcome name="Cahal" />
                        <Welcome name="Edite" />
                    </div>
                );
            }

            const element = <App name="Sara" />;
            ReactDOM.render(element, document.getElementById("root"));

            */
            /*
            function Comment(props) {
                return (
                    <div className="Comment">
                        <UserInfo user={props.author} />
                        <div className="Comment-text">{props.text}</div>
                        <div className="Comment-date">{formatDate(props.date)}</div>
                    </div>
                );
            }

            function Avatar(props) {
                return (
                    <img
                        className="Avatar"
                        src={props.user.avatarUrl}
                        alt={props.user.name}
                    />
                );
            }

            function UserInfo(props) {
                return (
                    <div className="UserInfo">
                        <Avatar user={props.user} />
                        <div classNmae="UserInfo-name">{props.user.name}</div>
                    </div>
                );
            }
            */
            /*
            class Toggle extends React.Component {
                constructor(props) {
                    super(props);
                    this.state = { isToggleOn: true };

                    // 콜백에서 `this`가 작동하려면 아래와 같이 바인딩 해주어야 합니다.
                    this.handleClick = this.handleClick.bind(this);
                }

                handleClick() {
                    this.setState((prevState) => ({
                        isToggleOn: !prevState.isToggleOn,
                    }));
                }

                render() {
                    return (
                        <button onClick={this.handleClick}>
                            {this.state.isToggleOn ? "ON" : "OFF"}
                        </button>
                    );
                }
            }

            ReactDOM.render(<Toggle />, document.getElementById("root"));

            
            */
            class LoginControl extends React.Component {
                constructor(props) {
                    super(props);
                    this.handleLoginClick = this.handleLoginClick.bind(this);
                    this.handleLogoutClick = this.handleLogoutClick.bind(this);
                    this.state = { isLoggedIn: false };
                }

                handleLoginClick() {
                    this.setState({ isLoggedIn: true });
                }

                handleLogoutClick() {
                    this.setState({ isLoggedIn: false });
                }

                render() {
                    const isLoggedIn = this.state.isLoggedIn;
                    let button;
                    if (isLoggedIn) {
                        button = <LogoutButton onClick={this.handleLogoutClick} />;
                    } else {
                        button = <LoginButton onClick={this.handleLoginClick} />;
                    }

                    return (
                        <div>
                            <Greeting isLoggedIn={isLoggedIn} />
                            {button}
                        </div>
                    );
                }
            }

            function UserGreeting(props) {
                return <h1>Welcome back!</h1>;
            }

            function GuestGreeting(props) {
                return <h1>Please sign up.</h1>;
            }
            function Greeting(props) {
                const isLoggedIn = props.isLoggedIn;
                if (isLoggedIn) {
                    return <UserGreeting />;
                }
                return <GuestGreeting />;
            }

            function LoginButton(props) {
                return <button onClick={props.onClick}>Login</button>;
            }

            function LogoutButton(props) {
                return <button onClick={props.onClick}>Logout</button>;
            }

            ReactDOM.render(<LoginControl />, document.getElementById("root"));
        </script>
    </body>
</html>
